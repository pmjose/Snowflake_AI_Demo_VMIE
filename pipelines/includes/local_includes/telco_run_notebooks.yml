## ============================================================================
## Telco Operations AI - Run Notebooks Job
## ============================================================================
## Purpose: Executes Notebook 1 (Data Processing) and Notebook 2 (Analyze Call Audio)
## Stage: Telco Notebook Execution
## Dependencies: Telco Deploy Applications (notebooks must exist first)
## Duration: 20-30 minutes (includes AI_TRANSCRIBE and AI_PARSE_DOCUMENT operations)
## ============================================================================

Telco Run Notebooks:
  extends:
    - .agent_tag
  stage: "Telco Notebook Execution"
  needs:
    - job: "Initialise Pipeline"
    - job: "Telco Deploy Applications"
  rules:
    - if: $EVENT_DEPLOY_TELCO == "true" && $TELCO_ENABLE_NOTEBOOKS == "true"
  image: $DATAOPS_SNOWFLAKE_RUNNER_IMAGE
  variables:
    DATAOPS_SNOWSQL_USER: $DATAOPS_SNOWFLAKE_USER
    DATAOPS_SNOWSQL_ACCOUNT: $DATAOPS_SNOWFLAKE_ACCOUNT
    DATAOPS_SNOWSQL_ROLE: ACCOUNTADMIN
    DATAOPS_SNOWSQL_WAREHOUSE: $EVENT_WAREHOUSE
    DATAOPS_SNOWFLAKE_AUTH: KEY_PAIR
    DATAOPS_RUN_SQL: $CI_PROJECT_DIR/dataops/event/telco_run_notebooks.sql
  script:
    - /dataops
  icon: ${SNOWFLAKE_ICON}

